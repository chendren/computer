<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>COMPUTER</title>
  <link rel="stylesheet" href="/css/lcars.css">
  <link rel="stylesheet" href="/css/components.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
  <script src="/lib/ort.min.js"></script>
  <script src="/lib/vad-bundle.min.js"></script>
</head>
<body>
  <div id="lcars-frame">
    <!-- Top Bar -->
    <header id="lcars-header">
      <div class="lcars-bar-top">
        <div class="lcars-elbow-top-left"></div>
        <div class="lcars-title-bar">
          <span class="lcars-title">USS Enterprise Computer</span>
        </div>
        <div class="lcars-elbow-top-right"></div>
      </div>
    </header>

    <!-- Sidebar -->
    <nav id="lcars-sidebar">
      <!-- Core -->
      <div class="lcars-nav-group-label">Core</div>
      <button class="lcars-button active" data-panel="dashboard">Dashboard</button>
      <button class="lcars-button" data-panel="main">Main</button>
      <button class="lcars-button" data-panel="transcript">Captain's Log</button>
      <button class="lcars-button" data-panel="analysis">Analysis</button>
      <button class="lcars-button" data-panel="charts">Charts</button>
      <button class="lcars-button" data-panel="knowledge">Knowledge</button>
      <!-- Comms -->
      <div class="lcars-nav-group-label">Comms</div>
      <button class="lcars-button" data-panel="channels">Channels</button>
      <button class="lcars-button" data-panel="search">Search</button>
      <button class="lcars-button" data-panel="log">Log</button>
      <button class="lcars-button" data-panel="monitor">Monitor</button>
      <button class="lcars-button" data-panel="compare">Compare</button>
      <!-- Ops -->
      <div class="lcars-nav-group-label">Ops</div>
      <button class="lcars-button" data-panel="gateway">Gateway</button>
      <button class="lcars-button" data-panel="plugins">Plugins</button>
      <button class="lcars-button" data-panel="cron">Cron</button>
      <button class="lcars-button" data-panel="browser">Browser</button>
      <button class="lcars-button" data-panel="nodes">Nodes</button>
      <button class="lcars-button" data-panel="security">Security</button>
      <div class="lcars-sidebar-spacer"></div>
      <div id="status-indicators"></div>
    </nav>

    <!-- Main Content -->
    <main id="lcars-main">
      <!-- Dashboard Panel -->
      <div id="panel-dashboard" class="panel active">
        <div class="lcars-label">Bridge Console</div>
        <div id="dashboard-content" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-icon">&#9670;</div>
            <div class="empty-state-text">Loading Systems...</div>
          </div>
        </div>
      </div>

      <!-- Main / Conversation Panel -->
      <div id="panel-main" class="panel">
        <div class="conversation-display" id="conversation-display">
          <div class="empty-state">
            <div class="empty-state-icon">&#9670;</div>
            <div class="empty-state-text">Computer Standing By</div>
          </div>
        </div>
        <div class="command-area">
          <input type="text" class="command-input" id="command-input" placeholder="Enter command..." autocomplete="off">
          <button class="cmd-btn" id="cmd-send">Send</button>
        </div>
      </div>

      <!-- Transcript Panel -->
      <div id="panel-transcript" class="panel">
        <div class="transcript-controls">
          <button class="mic-btn" id="mic-btn">Start Listening</button>
          <div class="upload-area">
            <button class="upload-btn" id="upload-btn">Upload Audio</button>
            <input type="file" id="audio-file-input" accept="audio/*" style="display:none">
            <span id="upload-status" class="status-segment"></span>
          </div>
        </div>
        <div class="transcript-session-controls">
          <button class="cmd-btn cmd-btn-sm" id="transcript-save-btn">Save Log</button>
          <button class="cmd-btn cmd-btn-sm" id="transcript-clear-btn">Clear</button>
          <span id="transcript-save-status" class="status-segment"></span>
        </div>
        <div class="lcars-divider"></div>
        <div class="lcars-label">Captain's Log</div>
        <div class="transcript-list" id="transcript-list">
          <div class="empty-state">
            <div class="empty-state-text">No log entries recorded, Captain</div>
          </div>
        </div>
      </div>

      <!-- Analysis Panel -->
      <div id="panel-analysis" class="panel">
        <div class="analysis-submit-form">
          <textarea id="analysis-input" class="analysis-textarea" placeholder="Paste or type text to analyze..." rows="4"></textarea>
          <div class="analysis-submit-row">
            <button class="cmd-btn" id="analysis-submit-btn">Analyze</button>
            <span id="analysis-status" class="status-segment"></span>
          </div>
        </div>
        <div class="lcars-divider"></div>
        <div class="lcars-label">Analysis Results</div>
        <div id="analysis-results" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-text">No analyses available</div>
          </div>
        </div>
      </div>

      <!-- Charts Panel -->
      <div id="panel-charts" class="panel">
        <div class="lcars-label">Visualizations</div>
        <div class="chart-wrapper" id="chart-wrapper">
          <div class="empty-state">
            <div class="empty-state-text">No charts generated</div>
          </div>
        </div>
      </div>

      <!-- Search Panel -->
      <div id="panel-search" class="panel">
        <div class="search-bar">
          <input type="text" class="search-input" id="search-input" placeholder="Search query..." autocomplete="off">
          <button class="cmd-btn" id="search-btn">Search</button>
        </div>
        <div class="lcars-divider"></div>
        <div class="lcars-label">Search Results</div>
        <div class="search-results-list" id="search-results">
          <div class="empty-state">
            <div class="empty-state-text">Enter a query above</div>
          </div>
        </div>
      </div>

      <!-- Captain's Log Panel -->
      <div id="panel-log" class="panel">
        <div class="log-submit-form">
          <textarea id="log-input" class="analysis-textarea" placeholder="Captain's log, stardate..." rows="3"></textarea>
          <div class="log-submit-row">
            <select id="log-category" class="lcars-select">
              <option value="personal">Personal</option>
              <option value="mission">Mission</option>
              <option value="technical">Technical</option>
              <option value="observation">Observation</option>
            </select>
            <button class="cmd-btn" id="log-submit-btn">Record Log</button>
            <span id="log-status" class="status-segment"></span>
          </div>
        </div>
        <div class="lcars-divider"></div>
        <div class="lcars-label">Captain's Log</div>
        <div id="log-list" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-text">No log entries</div>
          </div>
        </div>
      </div>

      <!-- Monitor Panel -->
      <div id="panel-monitor" class="panel">
        <div class="monitor-submit-form">
          <div class="monitor-input-row">
            <input type="text" id="monitor-name-input" class="search-input" placeholder="Monitor name..." autocomplete="off">
            <input type="text" id="monitor-target-input" class="search-input" placeholder="URL or endpoint to monitor..." autocomplete="off">
          </div>
          <div class="monitor-submit-row">
            <button class="cmd-btn" id="monitor-submit-btn">Create Monitor</button>
            <span id="monitor-status" class="status-segment"></span>
          </div>
        </div>
        <div class="lcars-divider"></div>
        <div class="lcars-label">Active Monitors</div>
        <div id="monitor-list" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-text">No monitors active</div>
          </div>
        </div>
      </div>

      <!-- Comparison Panel -->
      <div id="panel-compare" class="panel">
        <div class="comparison-submit-form">
          <div class="comparison-inputs">
            <div class="comparison-input-col">
              <input type="text" id="compare-name-a" class="search-input" placeholder="Subject A name..." autocomplete="off">
              <textarea id="compare-text-a" class="analysis-textarea" placeholder="Paste text A..." rows="4"></textarea>
            </div>
            <div class="comparison-input-col">
              <input type="text" id="compare-name-b" class="search-input" placeholder="Subject B name..." autocomplete="off">
              <textarea id="compare-text-b" class="analysis-textarea" placeholder="Paste text B..." rows="4"></textarea>
            </div>
          </div>
          <div class="comparison-submit-row">
            <button class="cmd-btn" id="compare-submit-btn">Compare</button>
            <span id="compare-status" class="status-segment"></span>
          </div>
        </div>
        <div class="lcars-divider"></div>
        <div class="lcars-label">Comparative Analysis</div>
        <div id="comparison-results" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-text">No comparisons yet</div>
          </div>
        </div>
      </div>

      <!-- Knowledge Panel -->
      <div id="panel-knowledge" class="panel">
        <div class="knowledge-controls">
          <div class="knowledge-search-row">
            <input type="text" class="search-input" id="knowledge-search" placeholder="Search knowledge base..." autocomplete="off">
            <select id="knowledge-search-method" class="lcars-select">
              <option value="hybrid">Hybrid</option>
              <option value="vector">Vector</option>
              <option value="keyword">Keyword</option>
              <option value="mmr">MMR</option>
              <option value="multi_query">Multi-Query</option>
            </select>
            <button class="cmd-btn" id="knowledge-search-btn">Search</button>
          </div>
          <div class="knowledge-filters-row">
            <select id="knowledge-filter-source" class="lcars-select-sm">
              <option value="">All Sources</option>
              <option value="user">User</option>
              <option value="analysis">Analysis</option>
              <option value="search">Search</option>
              <option value="monitor">Monitor</option>
              <option value="import">Import</option>
            </select>
            <select id="knowledge-filter-confidence" class="lcars-select-sm">
              <option value="">All Confidence</option>
              <option value="high">High</option>
              <option value="medium">Medium</option>
              <option value="low">Low</option>
            </select>
            <input type="text" class="tag-filter-input" id="knowledge-filter-tags" placeholder="Filter tags..." autocomplete="off">
            <span id="knowledge-result-count" class="knowledge-count"></span>
          </div>
        </div>
        <div class="lcars-divider"></div>
        <div class="knowledge-tabs">
          <button class="knowledge-tab active" data-view="entries">Entries</button>
          <button class="knowledge-tab" data-view="results">Search Results</button>
          <button class="knowledge-tab" data-view="stats">Stats</button>
        </div>
        <div class="lcars-label" id="knowledge-view-label">Knowledge Base</div>
        <div id="knowledge-list" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-text">No knowledge entries</div>
          </div>
        </div>
      </div>

      <!-- ═══ New OpenClaw Integration Panels ═══ -->

      <!-- Channels Panel -->
      <div id="panel-channels" class="panel">
        <div class="lcars-label">Communications Array</div>
        <div id="channels-content" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-icon">&#9670;</div>
            <div class="empty-state-text">Loading channels...</div>
          </div>
        </div>
      </div>

      <!-- Gateway Panel -->
      <div id="panel-gateway" class="panel">
        <div class="lcars-label">Gateway Control</div>
        <div id="gateway-content" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-icon">&#9670;</div>
            <div class="empty-state-text">Loading gateway status...</div>
          </div>
        </div>
      </div>

      <!-- Plugins Panel -->
      <div id="panel-plugins" class="panel">
        <div class="lcars-label">Plugin Registry</div>
        <div id="plugins-content" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-icon">&#9670;</div>
            <div class="empty-state-text">Loading plugins...</div>
          </div>
        </div>
      </div>

      <!-- Cron Panel -->
      <div id="panel-cron" class="panel">
        <div class="lcars-label">Temporal Operations</div>
        <div id="cron-content" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-icon">&#9670;</div>
            <div class="empty-state-text">Loading scheduled tasks...</div>
          </div>
        </div>
      </div>

      <!-- Browser Panel -->
      <div id="panel-browser" class="panel">
        <div class="browser-controls">
          <input type="text" class="search-input" id="browser-url-input" placeholder="Enter URL..." autocomplete="off">
          <button class="cmd-btn" id="browser-go-btn">Navigate</button>
          <button class="cmd-btn btn-small" id="browser-view-toggle" title="Toggle rendered/text view">Text</button>
        </div>
        <div class="lcars-divider"></div>
        <div class="browser-status-bar">
          <span class="lcars-label">Viewscreen</span>
          <span id="browser-page-info" class="browser-page-info"></span>
        </div>
        <div id="browser-content" style="flex:1; display:flex; flex-direction:column; overflow:hidden;">
          <iframe id="browser-iframe" class="browser-iframe" sandbox="allow-scripts allow-same-origin" style="flex:1; display:block;"></iframe>
          <div class="browser-viewport" id="browser-text-view" style="flex:1; overflow-y:auto; display:none;">
            <div class="empty-state">
              <div class="empty-state-text">Enter a URL to navigate</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Nodes Panel -->
      <div id="panel-nodes" class="panel">
        <div class="lcars-label">Connected Nodes</div>
        <div id="nodes-content" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-icon">&#9670;</div>
            <div class="empty-state-text">Loading nodes...</div>
          </div>
        </div>
      </div>

      <!-- Security Panel -->
      <div id="panel-security" class="panel">
        <div class="lcars-label">Security Operations</div>
        <div id="security-content" style="flex:1; overflow-y:auto;">
          <div class="empty-state">
            <div class="empty-state-icon">&#9670;</div>
            <div class="empty-state-text">Loading security status...</div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer Bar -->
    <footer id="lcars-footer">
      <div class="lcars-bar-bottom">
        <div class="lcars-elbow-bottom-left"></div>
        <div id="status-bar">
          <span class="status-segment" id="status-connection">Connecting...</span>
          <span class="status-segment" id="status-gateway"></span>
          <span class="status-segment" id="status-uptime"></span>
          <span class="status-segment" id="status-activity"></span>
        </div>
        <div class="lcars-elbow-bottom-right"></div>
      </div>
    </footer>
  </div>

  <script type="module" src="/js/app.js"></script>
</body>
</html>
